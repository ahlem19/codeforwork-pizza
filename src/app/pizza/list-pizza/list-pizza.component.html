<div class="container">
    <h3 style="text-align: center;padding-top:33px !important;">
        CFK Pizza MENU
        <mat-icon [matBadge]="(_pizzaStore$ | async).counter" matBadgeOverlap="false"></mat-icon>
        <button type="button" mdbBtn color="primary" mdbWavesEffect class="float-right" style="border-radius: 50%" (click)="showAddForm()">
      <span class="fa fa-plus"></span></button>
    </h3>
    <br>
    <table *ngIf="(_pizzaStore$ | async)._pizzas as tmplPizzas" class="table table-striped table-responsive-md btn-table" mdbTable mdbTableScroll scrollY="true" maxHeight="415" bordered="true">
        <thead>
            <tr>
                <th scope="col" *ngFor="let head of headElements; let i = index" scope="col" [mdbTableSort]="tmplPizzas" [sortBy]="headElements[i]">{{head}}
                    <mdb-icon icon="sort"></mdb-icon>
                </th>
                <!--   <th scope="col">Image</th>
                <th scope="col">Label</th>
                <th scope="col">Ingredients</th>
                <th scope="col">Price</th>
                <th scope="col"><i class="fa fa-upload"></i></th>
                <th scope="col"><span class="fa fa-trash text-danger"></span></th>
                <th scope="col"> <span class="fa fa-edit"></span></th> -->
            </tr>
        </thead>
        <div *ngIf="!tmplPizzas" class="spinner"><img [src]="'./assets/loader.gif'" alt="loader">Loding ...</div>
        <tbody *ngIf="(_pizzaStore$ | async).counter === 0">
            <tr>
                <th colspan="8">
                    <h1 class="text text-primary">We dont't have yet Pizza in our Menu</h1>
                </th>
            </tr>

        </tbody>
        <tbody>
            <tr mdbTableCol *ngFor="let pizza of tmplPizzas | paginate: { itemsPerPage: 4, currentPage: page } ; let i = index ">

                <th scope="row">
                    <img [src]="getPictureUrl(pizza?.picture)" class="img-responsive pizza waves-effect" alt="pizza-picture">
                    <app-picture-uploader *ngIf="pizza?.currentPizza" [pizzaId]="pizza._id" (uploadPictureEvent)="refresh($event)"></app-picture-uploader>
                </th>
                <th scope="row">{{pizza.label}}</th>
                <th scope="row">{{pizza.ingredients}}</th>
                <th scope="row">{{pizza.price | currency : 'TND'}}</th>
                <th scope="col" class="waves-effect"><i class="fa fa-upload" (click)="pizza.currentPizza=showUploadder(pizza,pizza.currentPizza)"></i></th>
                <th scope="row" class="waves-effect"><span class="fa fa-trash text-danger" (click)="deletePizza(pizza._id)"></span></th>
                <th scope="row" class="waves-effect"><span class="fa fa-edit" (click)="showUpdateForm(pizza)"></span></th>
            </tr>
        </tbody>
    </table>
    <pagination-controls align="center" (pageChange)="page = $event"></pagination-controls>

</div>

<app-add-pizza #adddetail (addPizzaEvent)="savePizza($event)"></app-add-pizza>
<app-update-pizza #updatedetail (updatePizzaEvent)="saveUpdatedPizza($event)"></app-update-pizza>